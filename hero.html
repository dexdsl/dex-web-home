<section id="dex-hero" class="dex-section">
  <video class="dex-bg" autoplay muted loop playsinline poster="" style="position:absolute;inset:0;object-fit:cover;z-index:-2">
    <source src="https://video.squarespace-cdn.com/content/v1/63956a55e99f9772a8cd1742/a157f35d-b252-448e-80dd-233e3c3cf26b/playlist.m3u8" type="application/x-mpegURL">
  </video>
  <style>
    #dex-hero .red-holo{transition:transform .2s ease;}
    #dex-hero .red-holo:hover{transform:scale(1.05);}
  </style>
  <script>
    const hero=document.getElementById('dex-hero');
    injectTypeStyles();
    hero.append(
      el('h1','dex-hero-title',{ 'aria-label':'DEX DIGITAL LIBRARY' },randomizeTitle('DEX DIGITAL LIBRARY')),
      el('p','dex-hero-tag',{},'a free archive of people, not sounds'),
      el('div','',{style:'display:flex;justify-content:center;gap:var(--space-3,1rem);margin-top:var(--space-4,1.5rem);'},
        el('a','',{href:'/catalog',className:'red-holo'},'Explore Catalog'),
        el('a','',{href:'/in-dex/dexfest-2024',className:'red-holo ghost'},'Watch dexFest 2024')
      )
    );
    const video=hero.querySelector('video');
    const reduce=window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(reduce){video.removeAttribute('autoplay');video.pause();}
    const h1=hero.querySelector('.dex-hero-title');
    let frame;
    function shift(){
      const r=window.scrollY/window.innerHeight;
      const h=Math.max(-30,Math.min(30,(r-0.5)*60));
      h1.style.setProperty('--hue',h+'deg');
      frame=null;
    }
    if(!reduce)window.addEventListener('scroll',()=>{if(!frame)frame=requestAnimationFrame(shift);},{passive:true});
    const canHLS=video.canPlayType && video.canPlayType('application/vnd.apple.mpegurl');
    if(video.poster && (canHLS==="" || canHLS===null)){
      const img=new Image();
      img.src=video.poster;
      img.className=video.className;
      img.style.cssText=video.style.cssText;
      video.replaceWith(img);
    }
  </script>
</section>
